DROP DATABASE IF EXISTS grades;
CREATE DATABASE grades;
USE grades;

CREATE TABLE BOOK (
  BOOK_ID INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
  NAME VARCHAR(45) NOT NULL
) ENGINE = InnoDB;

CREATE TABLE STUDENT (
  STUDENT_ID INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
  `NAME` VARCHAR(45) NOT NULL
) ENGINE = InnoDB;

CREATE TABLE ROOM (
  ROOM_ID INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
  NUMBER INT NOT NULL
) ENGINE = InnoDB;

CREATE TABLE TOPIC (
  TOPIC_ID INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
  `NAME` VARCHAR(45) NOT NULL,
  ROOM_ID INT NOT NULL,
  BOOK_ID INT NOT NULL,
  FOREIGN KEY (ROOM_ID) REFERENCES ROOM(ROOM_ID),
  FOREIGN KEY (BOOK_ID) REFERENCES BOOK(BOOK_ID)
) ENGINE = InnoDB;

CREATE TABLE TUTOR (
  TUTOR_ID INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
  `NAME` VARCHAR(45) NOT NULL,
  EMAIL VARCHAR(45) NOT NULL
) ENGINE = InnoDB;

CREATE TABLE UNIT (
  UNIT_ID INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
  TOPIC_ID INT NOT NULL,
  `DATE` DATE NOT NULL,
  FOREIGN KEY (TOPIC_ID) REFERENCES TOPIC(TOPIC_ID)
) ENGINE = InnoDB;

CREATE TABLE STUDENT_UNIT (
  STUDENT_ID INT NOT NULL,
  UNIT_ID INT NOT NULL,
  GRADE DECIMAL(3, 1),
  PRIMARY KEY (STUDENT_ID, UNIT_ID),
  FOREIGN KEY (STUDENT_ID) REFERENCES STUDENT(STUDENT_ID),
  FOREIGN KEY (UNIT_ID) REFERENCES UNIT(UNIT_ID)
) ENGINE = InnoDB;

CREATE TABLE UNIT_TUTOR (
  UNIT_ID INT NOT NULL,
  TUTOR_ID INT NOT NULL,
  PRIMARY KEY (UNIT_ID, TUTOR_ID),
  FOREIGN KEY (UNIT_ID) REFERENCES UNIT(UNIT_ID),
  FOREIGN KEY (TUTOR_ID) REFERENCES TUTOR(TUTOR_ID)
) ENGINE = InnoDB;

INSERT INTO BOOK (`NAME`)
VALUES
  ('Deumlich'),
  ('Zehnder'),
  ('DÃ¼mmlers'),
  ('SwissTopo');
  
INSERT INTO ROOM (`NUMBER`)
VALUES
  (629),
  (631),
  (632),
  (621);

INSERT INTO STUDENT (STUDENT_ID, `NAME`)
VALUES
  (1, 'St1'),
  (4, 'St4'),
  (2, 'St2');
  
INSERT INTO TUTOR (TUTOR_ID, `NAME`, EMAIL)
VALUES
  (1, 'Tut1', 'tut1@fhbb.ch'),
  (3, 'Tut3', 'tut3@fhbb.ch'),
  (5, 'Tut5', 'tut5@fhbb.ch');

INSERT INTO TOPIC (`NAME`, ROOM_ID, BOOK_ID)
VALUES
  ('GMT', 1, 1),
  ('GIn', 2, 2),
  ('PhF', 3, 3),
  ('AVQ', 4, 4);

INSERT INTO UNIT (UNIT_ID, TOPIC_ID, `DATE`)
VALUES
  (1, 1, DATE('23-02-03')),
  (2, 2, DATE('18-11-02')),
  (4, 4, DATE('04-07-03')),
  (5, 3, DATE('05-05-03'));

INSERT INTO UNIT_TUTOR (UNIT_ID, TUTOR_ID)
VALUES
  (1, 1),
  (2, 3),
  (5, 3),
  (4, 5);

INSERT INTO STUDENT_UNIT (STUDENT_ID, UNIT_ID, GRADE)
VALUES
  (1, 1, 4.7),
  (1, 2, 5.1),
  (4, 1, 4.3),
  (2, 5, 4.9),
  (2, 4, 5);












